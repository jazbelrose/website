import React, { useEffect, useRef } from "react";
import { gsap } from "gsap";

const Counter = () => {
  const counterRef = useRef(null);

  useEffect(() => {
    // Ensure the element is available before starting the animation
    if (counterRef.current) {
      // Animation for rotating the burst element
      gsap.to(".burst", {
        rotation: 360,
        transformOrigin: "center",
        repeat: -1,
        duration: 5,
        ease: "linear",
      });

      // Counter text animation from 0 to 100
      gsap.to(counterRef.current, {
        innerHTML: 100,
        duration: 2.5,
        ease: 'none',
        snap: { innerHTML: 1 },
        onUpdate: function () {
          // Ensure the element is still available during each update
          if (counterRef.current) {
            counterRef.current.innerHTML = Math.min(100, Math.round(this.targets()[0].innerHTML));
          }
        },
      });
    }
  }, []);

  return (
    <div style={{
        display: 'flex', 
        justifyContent: 'center', 
        alignItems: 'center', 
        height: '100vh', // Full viewport height
        width: '100vw' // Full viewport width
      }}>
      <svg
        version="1.1"
        id="uuid-d9379528-c928-4ff4-8364-c29b6baeddef"
        viewBox="0 0 147.8 151.5"
        style={{ enableBackground: 'new 0 0 147.8 151.5', width: '20%', maxWidth: '200px' }}
      >
    <style type="text/css">
  {`
    .burst {
      fill: #FFFFFF;
    }
    .text {
      fill: #FFFFFF;
      font-family: 'Helvetica Special';
      font-size: 32.77px;
    }
  `}
</style>

    <path class="burst" d="M107.1,7.7l-0.7-0.3c-6.2,12.9-11.5,23.7-16,32.8c0.3,0.2,0.7,0.3,1,0.5C95.8,31.5,100.9,20.5,107.1,7.7
        L107.1,7.7z M109.1,32.3l-0.6-0.5c-3.7,4.7-7.2,8.9-10.4,12.9c0.2,0.2,0.5,0.4,0.7,0.6C102,41.3,105.4,36.9,109.1,32.3z M74.5,36.5
        C74.4,26.4,74.3,14.3,74.3,0h-0.8c0,14.3-0.1,26.4-0.2,36.5c0.2,0,0.3,0,0.5,0C74.1,36.5,74.3,36.5,74.5,36.5L74.5,36.5z M61.9,21.2
        C61.9,21.2,61.9,21.2,61.9,21.2l-0.8,0.1c1.3,5.8,2.5,11.2,3.6,16.2c0.3-0.1,0.6-0.2,0.9-0.2C64.4,32.4,63.2,27,61.9,21.2L61.9,21.2
        z M86.7,21.4C86.7,21.4,86.7,21.4,86.7,21.4L86,21.2c-1.3,5.8-2.6,11.2-3.8,16.2c0.3,0.1,0.6,0.1,0.9,0.2
        C84.2,32.6,85.4,27.2,86.7,21.4z M41.4,7.3l-0.7,0.3c0,0,0,0.1,0.1,0.2C47,20.6,52.1,31.5,56.4,40.5c0.3-0.2,0.7-0.3,1-0.5
        C52.9,31,47.6,20.2,41.4,7.3z M133.4,28.8l-0.5-0.6c-11.1,8.9-20.6,16.3-28.6,22.5c0.2,0.3,0.5,0.6,0.7,0.9
        C112.8,45.3,122.2,37.7,133.4,28.8z M147.8,59.3l-0.2-0.7c-13.8,3.2-25.6,5.8-35.4,7.9c0.1,0.4,0.2,0.7,0.2,1.1
        C122.3,65.2,134,62.4,147.8,59.3L147.8,59.3z M124.4,51.8l-0.3-0.7c-5.4,2.6-10.3,4.9-14.9,7.1c0.1,0.3,0.3,0.6,0.4,0.8
        C114.2,56.8,119.1,54.4,124.4,51.8z M34.3,75.3c-5,0.1-10.5,0.1-16.3,0.1v0.8c5.9,0,11.3,0,16.3,0.1c0-0.1,0-0.1,0-0.2
        C34.3,75.7,34.3,75.5,34.3,75.3L34.3,75.3z M23.7,51.1l-0.3,0.7c0,0,0.1,0,0.1,0c5.3,2.6,10.2,4.9,14.7,7.2c0.1-0.3,0.3-0.6,0.4-0.8
        C34,56,29.1,53.7,23.7,51.1L23.7,51.1z M113.4,76.2c5-0.1,10.5-0.1,16.4-0.1v-0.8c-5.9,0-11.3,0-16.4-0.1c0,0.2,0,0.5,0,0.7
        C113.5,76.1,113.5,76.1,113.4,76.2L113.4,76.2z M23.4,99.7l0.3,0.7c0,0,0,0,0.1,0c5.2-2.5,10.1-4.8,14.6-6.9
        c-0.1-0.3-0.3-0.6-0.4-0.8C33.5,94.8,28.7,97.1,23.4,99.7z M124.1,100.3l0.3-0.7c-5.3-2.5-10.1-4.9-14.6-7.1
        c-0.1,0.3-0.3,0.6-0.4,0.8C113.9,95.5,118.8,97.8,124.1,100.3L124.1,100.3z M86,130.3l0.7-0.2c0,0,0,0,0,0
        c-1.3-5.7-2.4-10.8-3.5-15.7c-0.3,0.1-0.6,0.1-0.9,0.2C83.5,119.5,84.7,124.7,86,130.3L86,130.3z M61.1,130.1l0.7,0.2c0,0,0,0,0-0.1
        c1.3-5.6,2.5-10.8,3.6-15.6c-0.3-0.1-0.6-0.1-0.9-0.2C63.6,119.3,62.4,124.5,61.1,130.1z M106.4,144.1l0.7-0.3c0,0,0-0.1,0-0.1
        c-6.1-12.6-11.2-23.4-15.4-32.4c-0.3,0.2-0.7,0.3-1,0.5C95.1,120.8,100.3,131.5,106.4,144.1L106.4,144.1z M73.4,115.5
        c0.1,10,0.2,21.9,0.2,35.9h0.8c0-14,0.1-26,0.2-35.9c-0.2,0-0.4,0-0.6,0C73.7,115.6,73.5,115.5,73.4,115.5z M108.5,119.7l0.6-0.5
        c0,0,0,0-0.1-0.1c-3.6-4.5-6.9-8.7-10-12.6c-0.2,0.2-0.5,0.4-0.7,0.6C101.5,110.9,104.8,115.1,108.5,119.7L108.5,119.7z M112.4,85.1
        c9.8,2.1,21.5,4.7,35.3,7.9l0.2-0.7c-13.8-3.2-25.5-5.9-35.2-8.2C112.6,84.4,112.5,84.7,112.4,85.1L112.4,85.1z M132.8,123.2
        C132.8,123.2,132.9,123.2,132.8,123.2l0.5-0.5c-11-8.8-20.3-16.3-28.1-22.6c-0.2,0.3-0.4,0.6-0.7,0.9
        C112.5,107.1,121.9,114.5,132.8,123.2L132.8,123.2z M0,92.2L0.2,93c13.8-3.1,25.5-5.7,35.2-7.9c-0.1-0.4-0.2-0.7-0.2-1.1
        C25.4,86.3,13.8,89.1,0,92.2z M0.2,58.5L0,59.2c13.8,3.2,25.5,5.9,35.3,8.2c0.1-0.4,0.2-0.7,0.2-1.1C25.7,64.3,14,61.7,0.2,58.5z
         M39.4,31.8l-0.6,0.5c3.7,4.7,7.1,9,10.2,13c0.2-0.2,0.5-0.4,0.7-0.6C46.5,40.7,43.1,36.5,39.4,31.8L39.4,31.8z M14.9,28.2l-0.5,0.6
        C25.6,37.7,35,45.3,42.8,51.6c0.2-0.3,0.5-0.6,0.7-0.9C35.5,44.5,26.1,37.1,14.9,28.2z M14.5,122.7l0.5,0.6
        c11-8.8,20.4-16.2,28.3-22.3c-0.2-0.3-0.5-0.6-0.7-0.9C34.8,106.4,25.5,113.9,14.5,122.7z M38.8,119.2l0.6,0.5
        c3.6-4.5,7-8.7,10.1-12.6c-0.2-0.2-0.5-0.4-0.7-0.6C45.7,110.5,42.4,114.7,38.8,119.2L38.8,119.2z M40.7,143.8l0.7,0.3
        c6.1-12.6,11.3-23.3,15.7-32.3c-0.3-0.2-0.7-0.3-1-0.5C51.9,120.4,46.8,131.2,40.7,143.8z"/>
     <text ref={counterRef} transform="matrix(1 0 0 1 49.17 88.17)" className="text">0</text>
      </svg>
    </div>
  );
};

export default Counter;